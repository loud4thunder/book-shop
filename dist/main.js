(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var s;e.g.importScripts&&(s=e.g.location+"");var i=e.g.document;if(!s&&i&&(i.currentScript&&(s=i.currentScript.src),!s)){var r=i.getElementsByTagName("script");if(r.length)for(var a=r.length-1;a>-1&&!s;)s=r[a--].src}if(!s)throw new t("Automatic publicPath is not supported in this browser");s=s.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=s})();class t{check(){document.querySelector(".main").style.display="none";let e=document.createElement("div");e.classList.add("error"),document.querySelector(".container").insertAdjacentElement("beforeend",e),e.innerHTML='<span class="purple">Ooops ... </span>something went wrong, check your internet connection and try again &#128556'}}const s=new t,i=new class{init(){document.querySelector(".cards").insertAdjacentHTML("beforeend",'<div class="loader"><div></div><div></div><div></div><div></div></div>')}hide(){document.querySelector(".cards").removeChild(document.querySelector(".loader"))}};class r{constructor(e,t,s,i,r){this.apiKey=e,this.cardsLimit=t,this.cardsIncrease=s,this.cardsStartIndex=i,this.itemInCart=r}request(e){i.init(),fetch(e).then((e=>e.json())).then((e=>{this.writeOutput(this.formatOutput(e))})).catch((e=>{console.error(e),s.check()}))}requestLoadMore(e){i.init(),fetch(e).then((e=>e.json())).then((e=>{this.writeOutputLoadMore(this.formatOutput(e)),i.hide()})).catch((e=>{console.error(e),s.check()}))}defaultRequest(){document.querySelector('[data-category="subject:Architecture"]').classList.add("link--active");let e=document.querySelector(".nav-category-list__item").querySelector(".link").getAttribute("data-category");document.querySelector(".cards").setAttribute("data-type",e);let t=`https://www.googleapis.com/books/v1/volumes?q='${e}'&key=${this.apiKey}&printType=books&startIndex=${this.cardsStartIndex}&maxResults=${this.cardsLimit}&langRestrict=en`;this.request(t)}currentRequest(){let e=document.querySelector(".cards"),t=document.querySelectorAll(".nav-category-list__item");t.forEach((s=>{s.addEventListener("click",(s=>{const i=s.target;t.forEach((e=>{e.querySelector(".link").classList.remove("link--active")})),this.cardsLimit=6,this.cardsStartIndex=0,i.classList.add("link--active");let r=i.getAttribute("data-category");document.querySelector(".cards").setAttribute("data-type",r);let a=`https://www.googleapis.com/books/v1/volumes?q='${r}'&key=${this.apiKey}&printType=books&startIndex=${this.cardsStartIndex}&maxResults=${this.cardsLimit}&langRestrict=en`;e.innerHTML="",this.request(a)}))}))}formatOutput(e){let t="";return e.items.forEach((function(e){let s,i,r,a;if(s=e.volumeInfo.hasOwnProperty("imageLinks")?e.volumeInfo.imageLinks.thumbnail:"./images/thumbnail.png",e.volumeInfo.hasOwnProperty("authors"))if(e.volumeInfo.authors.length>1)i=e.volumeInfo.authors.join(", ");else{let t=70;i=e.volumeInfo.authors.join(", ").substring(0,t)+"..."}else i="";if(e.volumeInfo.hasOwnProperty("title")){let t=e.volumeInfo.title;if(t.length>45){let e=45;r=t.substring(0,e)+"..."}else r=e.volumeInfo.title}else r="";if(e.volumeInfo.hasOwnProperty("description")){let t=100;a=e.volumeInfo.description.substring(0,t)+"..."}else a="";let o,n,c=e.volumeInfo.averageRating;if(o=e.volumeInfo.hasOwnProperty("ratingsCount")?e.volumeInfo.ratingsCount:"",e.saleInfo.hasOwnProperty("retailPrice")){let t=80;n=(e.saleInfo.retailPrice.amount/t).toFixed(2)}else n="";let l=e.id;t+=`\n\n      <div class='cards-item' data-id='${l}'>\n\n        <img class='cards-item-img' src='${s}' alt='Book Image'>\n\n        <div class='cards-item-block'>\n\n            <div class='cards-item-block__authors'>${i}</div>\n\n            <div class='cards-item-block__title'>${r}</div>\n\n            <div class='cards-item-block__rating'>\n\n                <div class='rating-average'>${c}</div>\n\n                <div class='rating-count'>${o} review</div>\n    \n            </div>\n\n            <div class='cards-item-block__description'>${a}</div>\n\n            <div class='cards-item-block__price'>&#36;${n}</div>\n\n            <button class='cards-item-block__btn'>Buy Now</button>\n\n        </div>\n\n      </div>`})),t}writeOutput(e){document.querySelector(".cards").innerHTML=e,this.formatBooksInformation(),this.loadMore(),this.addToCart()}writeOutputLoadMore(e){document.querySelector(".cards").innerHTML+=e,this.formatBooksInformation(),this.loadMore(),this.addToCart()}loadMore(){document.querySelector(".btn-load").addEventListener("click",(()=>{document.querySelector(".cards").removeChild(document.querySelector(".load")),this.cardsStartIndex+=this.cardsIncrease;let e=`https://www.googleapis.com/books/v1/volumes?q='${document.querySelector(".cards").getAttribute("data-type")}'&key=${this.apiKey}&printType=books&startIndex=${this.cardsStartIndex}&maxResults=${this.cardsLimit}&langRestrict=en`;this.requestLoadMore(e)}))}addToCart(){let e=document.querySelector(".bage"),t=document.querySelector(".bage-text"),s=document.querySelectorAll(".cards-item-block__btn"),i=[];s.forEach((s=>{s.addEventListener("click",(s=>{const r=s.target;let a={id:r.closest(".cards-item").getAttribute("data-id")},o=i.findIndex((e=>e.id===a.id));i.find((e=>e.id===a.id))?(r.textContent="Buy now",this.itemInCart-=1,localStorage.setItem("booksInCart",this.itemInCart),r.classList.remove("cards-item-block__btn--selected"),t.textContent=this.itemInCart,i.splice(o,1),localStorage.setItem("booksDataInCart",JSON.stringify(i))):(e.style.display="block",r.textContent="In the cart",this.itemInCart+=1,localStorage.setItem("booksInCart",this.itemInCart),t.textContent=this.itemInCart,r.classList.add("cards-item-block__btn--selected"),i.push(a),localStorage.setItem("booksDataInCart",JSON.stringify(i))),0===this.itemInCart&&(e.style.display="none")})),null!=localStorage.getItem("booksDataInCart")&&(i=JSON.parse(localStorage.getItem("booksDataInCart")),document.querySelectorAll(".cards-item").forEach((e=>{let t=e.getAttribute("data-id");i.find((e=>e.id===t))&&(e.querySelector(".cards-item-block__btn").textContent="In the cart",e.querySelector(".cards-item-block__btn").classList.add("cards-item-block__btn--selected"))})))})),null!=localStorage.getItem("booksInCart")&&(e.style.display="block",this.itemInCart=Number(localStorage.getItem("booksInCart")),t.textContent=this.itemInCart,0===this.itemInCart&&(e.style.display="none"))}formatBooksInformation(){document.querySelectorAll(".cards-item-block__authors").forEach((e=>{""===e.textContent&&e.classList.add("hidden")})),document.querySelectorAll(".cards-item-block__description").forEach((e=>{""===e.textContent&&e.classList.add("hidden")})),document.querySelectorAll(".cards-item-block__price").forEach((e=>{"$"!==e.textContent&&"$0"!==e.textContent||e.classList.add("hidden")})),document.querySelectorAll(".rating-average").forEach((e=>{const t=parseFloat(e.textContent),s=Math.floor(t),i=t%1!=0,r=5-Math.ceil(t);if(s){e.innerHTML="";for(let t=0;t<s;t++){let t=document.createElement("img");t.src="images/icons/star_fill.svg",e.appendChild(t)}if(i){let t=document.createElement("img");t.src="images/icons/star_half.svg",e.appendChild(t)}if(r)for(let t=0;t<r;t++){let t=document.createElement("img");t.src="images/icons/star.svg",e.appendChild(t)}}if("undefined"===e.textContent){e.innerHTML="";for(let t=0;t<5;t++){let t=document.createElement("img");t.src="images/icons/star.svg",e.appendChild(t)}}})),document.querySelector(".cards").insertAdjacentHTML("beforeend","<div class='load'><button class='btn-load'>Load More</button></div>")}}class a{constructor(e,t,s){this.slides=e,this.changeTime=t,this.intervalId=s}initSlider(){this.slides&&this.slides.length}initImages(){let e=document.querySelector(".slider-images");this.slides.forEach(((t,s)=>{t=`<img class='slider-images__item n${s} ${0===s?"active-image":""}' src="${this.slides[s].url}" data-index='${s}'></div>`,e.innerHTML+=t}))}initDots(){let e=document.querySelector(".slider-dots");this.slides.forEach(((t,s)=>{t=`<div class='slider-dots__item n${s} ${0===s?"active-dot":""}' data-index='${s}'></div>`,e.innerHTML+=t})),e.querySelectorAll(".slider-dots__item").forEach((e=>{e.addEventListener("click",(()=>{this.moveSlider(e.dataset.index),this.initAutoPlay()}))}))}initAutoPlay(){let e=document.querySelector(".slider-images");clearInterval(this.intervalId),this.intervalId=setInterval((()=>{let t=+e.querySelector(".active-image").dataset.index,s=t===this.slides.length-1?0:t+1;this.moveSlider(s)}),this.changeTime)}moveSlider(e){let t=document.querySelector(".slider-images");t.querySelector(".active-image").classList.remove("active-image"),t.querySelector(".n"+e).classList.add("active-image");let s=document.querySelector(".slider-dots");s.querySelector(".active-dot").classList.remove("active-dot"),s.querySelector(".n"+e).classList.add("active-dot")}play(){this.initSlider(),this.initImages(),this.initDots(),this.initAutoPlay()}}const o=[{url:"images/slide_1.jpg"},{url:"images/slide_2.jpg"},{url:"images/slide_3.jpg"}];class n{toTop(){let e=document.createElement("div");e.classList.add("arrow-btn"),document.querySelector(".container").insertAdjacentElement("beforeend",e),window.addEventListener("scroll",(()=>{let t=window.pageYOffset;document.querySelector(".header").offsetHeight+document.querySelector(".slider").offsetHeight<t?e.classList.add("arrow-btn--active"):e.classList.remove("arrow-btn--active")})),e.addEventListener("click",(()=>{document.querySelector(".header").scrollIntoView(!0);let t=document.querySelector(".header");window.scrollTo({top:t,behavior:"smooth"}),e.classList.remove("arrow-btn--active")}))}}class c{init(){let e=document.querySelector(".nav-category"),t=document.querySelector(".nav-category-list"),s=document.querySelector(".switcher-body"),i=document.querySelector(".switcher-body__btn");s.addEventListener("click",(()=>{e.classList.toggle("nav-category--open"),t.classList.toggle("nav-category-list--open"),s.classList.toggle("switcher-body--dark"),i.classList.toggle("switcher-body__btn--dark")})),window.addEventListener("resize",(()=>{e.classList.remove("nav-category--open"),t.classList.remove("nav-category-list--open"),s.classList.remove("switcher-body--dark"),i.classList.remove("switcher-body__btn--dark")}),!0)}}const l=e.p+"images\\icons\\arrow.svg",d=e.p+"images\\icons\\user.svg",m=e.p+"images\\icons\\cart.svg",u=e.p+"images\\icons\\search.svg",g=e.p+"images\\icons\\star.svg",h=e.p+"images\\icons\\star_fill.svg",v=e.p+"images\\icons\\star_half.svg",y=e.p+"images\\thumbnail.png",p=e.p+"images\\slide_1.jpg",b=e.p+"images\\slide_2.jpg",f=e.p+"images\\slide_3.jpg";(new Image).src=l,(new Image).src=d,(new Image).src=m,(new Image).src=u,(new Image).src=g,(new Image).src=h,(new Image).src=v,(new Image).src=y,(new Image).src=p,(new Image).src=b,(new Image).src=f;class I{init(){let e=new r("AIzaSyCIXE_nRhEppkCCfuAUS3CNKv7cLaGMOC0",6,6,0,0);e.defaultRequest(),e.currentRequest(),new a(o,5e3,0).play(),(new n).toTop(),(new c).init()}}document.addEventListener("DOMContentLoaded",(()=>{(new I).init()}))})();